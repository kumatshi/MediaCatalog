<Window x:Class="MediaCatalog.Views.MusicPlayerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Моя музыка"
        Height="650"
        Width="900"
        WindowStartupLocation="CenterOwner"
        Background="#0D1B2A">

    
    <Window.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#1DE9B6"/>
        
        
        <SolidColorBrush x:Key="AccentBrushHover" Color="#00BFA5"/>
        <SolidColorBrush x:Key="PanelBrush" Color="#162B43"/>

        
        <SolidColorBrush x:Key="ButtonBackground" Color="#203E5F"/>
        
        
        <SolidColorBrush x:Key="ButtonBackgroundHover" Color="#1DE9B6"/>
        <SolidColorBrush x:Key="ButtonForeground" Color="White"/>
        <SolidColorBrush x:Key="ButtonForegroundHover" Color="#0D1B2A"/>

        <Style TargetType="Button">
            <Setter Property="Foreground" Value="{StaticResource ButtonForeground}"/>
            <Setter Property="Background" Value="{StaticResource ButtonBackground}"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource ButtonBackgroundHover}"/>
                                <Setter Property="Foreground" Value="{StaticResource ButtonForegroundHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#00A087"/>
                               
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style TargetType="Slider">
            <Setter Property="Height" Value="12"/>
            <Setter Property="Background" Value="#203E5F"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Rectangle x:Name="PART_TrackBackground" Height="6" VerticalAlignment="Center" Fill="{TemplateBinding Background}" RadiusY="3" RadiusX="3"/>
                            <Rectangle x:Name="PART_TrackFill" Height="6" VerticalAlignment="Center" Fill="{TemplateBinding Foreground}" RadiusY="3" RadiusX="3" Width="0"/>
                            <Thumb x:Name="Thumb" Width="16" Height="16" BorderBrush="{StaticResource AccentBrush}" BorderThickness="1" Background="{StaticResource AccentBrush}" >
                                <Thumb.Template>
                                    <ControlTemplate TargetType="Thumb">
                                        <Border Background="{TemplateBinding Background}" 
                                                BorderBrush="{TemplateBinding BorderBrush}" 
                                                BorderThickness="{TemplateBinding BorderThickness}" 
                                                CornerRadius="8"/>
                                    </ControlTemplate>
                                </Thumb.Template>
                            </Thumb>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Thumb" Property="Background" Value="{StaticResource ButtonBackgroundHover}"/>
                                <Setter TargetName="Thumb" Property="BorderBrush" Value="{StaticResource ButtonBackgroundHover}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="10" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="120"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Center" Margin="0 0 0 10">
            <Button x:Name="LoadMusicButton" Click="LoadMusicButton_Click">
                Загрузить музыку
            </Button>
            <Button x:Name="PlayButton" Click="PlayButton_Click">
                Воспроизвести
            </Button>
            <Button x:Name="PauseButton" Click="PauseButton_Click">
                Пауза
            </Button>
            <Button x:Name="StopButton" Click="StopButton_Click">
                Стоп
            </Button>
        </StackPanel>

        <ListView x:Name="MusicListView" Grid.Row="1" Background="{StaticResource PanelBrush}" 
                  Foreground="White" BorderThickness="0" Margin="0 0 0 10"
                  SelectionChanged="MusicListView_SelectionChanged">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Background="#1E2D45" Margin="2" Padding="10" CornerRadius="6" >
                        <StackPanel>
                            <TextBlock Text="{Binding Title}" FontWeight="Bold" FontSize="14" Foreground="White"/>
                            <TextBlock Text="{Binding Artist}" FontStyle="Italic" Foreground="{StaticResource AccentBrush}"/>
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Border Grid.Row="2" Background="{StaticResource PanelBrush}" CornerRadius="10" Padding="10" Margin="0 0 0 10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" x:Name="VisualizerPanel" Height="100" >
                
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#1DE9B6" Offset="0"/>
                            <GradientStop Color="#00BFA5" Offset="1"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>
                
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
                <Rectangle Width="8" Height="10" Margin="2" RadiusX="4" RadiusY="4" Fill="{StaticResource AccentBrush}"/>
            </StackPanel>
        </Border>

        <StackPanel Grid.Row="3" Orientation="Vertical" HorizontalAlignment="Stretch">
            <TextBlock x:Name="NowPlayingTitle" Text="Трек не выбран" Foreground="White" FontSize="16" FontWeight="Bold" Margin="10,0"/>
            <TextBlock x:Name="NowPlayingArtist" Text="" Foreground="{StaticResource AccentBrush}" FontStyle="Italic" Margin="10,0 10,10"/>
            <Slider x:Name="ProgressSlider" Minimum="0" Maximum="100" Value="0" Margin="10 0" 
                    PreviewMouseLeftButtonDown="ProgressSlider_PreviewMouseLeftButtonDown"
                    PreviewMouseLeftButtonUp="ProgressSlider_PreviewMouseLeftButtonUp"
                    />
            <TextBlock x:Name="NowPlayingTime" Text="00:00 / 00:00" Foreground="#CCC" HorizontalAlignment="Right" Margin="10,5"/>
        </StackPanel>

        <MediaElement x:Name="MediaPlayer" LoadedBehavior="Manual" UnloadedBehavior="Stop"
                      MediaOpened="MediaPlayer_MediaOpened" MediaEnded="MediaPlayer_MediaEnded" Visibility="Collapsed"/>
    </Grid>
</Window>
